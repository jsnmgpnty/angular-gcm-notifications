self.deviceId=null,self.notificationsApi=null,self.errorIcon=null,self.defaultIcon=null,self.periodicNotifications=[],self.addEventListener("push",function(a,b,c,d){var e=setInterval(function(){if(self.deviceId&&self.notificationsApi){clearInterval(e),e=null;try{a.waitUntil(fetch(self.notificationsApi+self.deviceId).then(function(a){if(200!==a.status)throw new Error;return a.json().then(function(a){if(!a)throw new Error;var b=a.title,c=a.content,d=a.icon,e=a.tag,f=a.url;return self.registration.showNotification(b,{body:c,icon:d,tag:e,data:f})})})["catch"](function(a){var b="An error occurred",c="We were unable to get the information for this push message",d=self.defaultIcon,e="notification-error";return self.registration.showNotification(b,{body:c,icon:d,tag:e,data:url})}))}catch(b){console.log(b)}}},250)}),self.addEventListener("install",function(a){setInterval(function(){for(var a=self.periodicNotifications.length,b=0;a>b;b++)if(self.periodicNotifications[b]){var c=self.periodicNotifications[b].date,d=new Date;if(d>=c){var e=self.periodicNotifications[b].notification,f=e.title,g=e.message,h=e.icon,i=e.tag,j=e.url;return self.periodicNotifications.splice(b,1),self.registration.showNotification(f,{body:g,icon:h,tag:i,data:j})}}},1e4)},!1),self.addEventListener("message",function(a){if(a.data)if("default"===a.data.type){var b=a.data.data;self.deviceId=b.deviceId,self.notificationsApi=b.notificationsApi,self.errorIcon=b.errorIcon,self.defaultIcon=b.defaultIcon}else if("notifications"===a.data.type){var b=a.data.data;self.periodicNotifications=b}},!1),self.addEventListener("notificationclick",function(a){console.log("On notification click: ",a.notification.tag),a.notification.close();var b=a.notification;a.waitUntil(clients.matchAll({type:"window"}).then(function(a){for(var c=0;c<a.length;c++){a[c];if(b&&b.data&&clients.openWindow)return clients.openWindow(b.data)}}))});